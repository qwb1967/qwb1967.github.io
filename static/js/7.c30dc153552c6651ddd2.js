webpackJsonp([7],{cSQh:function(e,t){},qU85:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("vQ9I"),n={data:function(){return{searchValue:"",tableData:[],dialogTitle:"",dialogFormVisible:!1,category:[],searchType:[{key:"",value:"全部"}],cellWidth:"",formLabelWidth:"200px",pageNum:1,pageSize:10,searchDate:"",pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},mounted:function(){this.getOrders()},methods:{getOrders:function(){var e=this;Object(l.a)({url:"/api/order/list",method:"get",params:{pageNum:this.pageNum,pageSize:this.pageSize,str:this.searchValue,startDate:null!==this.searchDate?this.searchDate[0]:"",endDate:null!==this.searchDate?this.searchDate[1]:""},success:function(t){e.category=t.data.data,e.tableData=t.data.data.list},fail:function(e){console.log(e)}},this)},withdrawOrder:function(e){var t=this;this.$confirm("此操作将撤销该订单并恢复库存和会员卡余额，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(l.a)({url:"/api/order/withdrawOrder",method:"get",params:{id:e},success:function(e){t.$message({message:"已撤销",center:!0,type:"success"}),t.getOrders()},fail:function(e){console.log(e)}},t)}).catch(function(){t.$message({type:"info",center:!0,message:"已取消"})})},handleCurrentChange:function(e){this.pageNum=e,this.getOrders()}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"search"},[a("div",{staticClass:"frame"},[a("el-date-picker",{staticClass:"pickerStyle",attrs:{size:"medium",type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions2},model:{value:e.searchDate,callback:function(t){e.searchDate=t},expression:"searchDate"}})],1),e._v(" "),a("div",{staticClass:"frame"},[a("el-input",{attrs:{size:"medium",placeholder:"会员名称、手机号、宠物名称",clearable:""},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e._v(" "),a("div",{staticClass:"frame-btn"},[a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-search",round:""},on:{click:e.getOrders}},[e._v("查询")])],1)]),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-table",{attrs:{data:t.row.orderDtlDtoList}},[a("el-table-column",{attrs:{label:"费用项目",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:t.row.projectName,placement:"top"}},[a("div",{staticClass:"cell-name-div"},[e._v(e._s(t.row.projectName))])])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"数量",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.count))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"原价",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.originalPrice))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"销售价",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.salePrice))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"折扣率",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.discountRate)+"%")])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"总价",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.totalPrice))])]}}],null,!0)})],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订单号",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.orderCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n      "+e._s(t.row.ownerName)+"\n    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"宠物名",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n      "+e._s(t.row.petName)+"\n    ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"会员卡",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.cardNum)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"合计金额",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.totalPrice)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"支付方式",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.payChannelDesc)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"消费时间",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[null!==t.row.payTime&&""!==t.row.payTime?a("span",[e._v(e._s(t.row.payTime))]):e._e(),e._v(" "),null==t.row.payTime||""==t.row.payTime?a("span",[e._v(e._s(t.row.createTime))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.remark)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"撤销订单",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",round:""},on:{click:function(a){return e.withdrawOrder(t.row.id)}}},[e._v("撤销")]):e._e(),e._v(" "),2===t.row.status?a("span",{attrs:{size:"small",round:""}},[e._v("已撤销")]):e._e()]}}])})],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-size":10,background:"",layout:"total, prev, pager, next",total:e.category.total},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var s=a("C7Lr")(n,r,!1,function(e){a("cSQh")},"data-v-be9d2bd8",null);t.default=s.exports}});