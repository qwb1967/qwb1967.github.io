webpackJsonp([16],{NUed:function(e,t){},XHjW:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("vQ9I"),r=a("s0MJ"),s=a("YR7f"),o={data:function(){return{searchValue:"",select:"",category:[],searchType:[{id:"",name:"全部"}],owners:{},tableData:[],cellWidth:"",form:{},dialogFormVisible:!1,dialogTitle:"",Vipdialog:!1,cardEditDialogTitle:"",cardEditDialog:!1,VipdialogTitle:"",petdialog:!1,petdialogTitle:"",investdialog:!1,investdialogTitle:"充值",recordTableVisible:!1,recordpageNum:1,recordpageSize:10,recordType:"",payCardId:"",payRecord:{},gridData:[],investType:0,formLabelWidth:"200px",pageNum:1,pageSize:10,info:0,petInfo:0,bePets:[],repayDialogTitle:"退卡",repayDialog:!1,repayForm:{totalIncreaseNum:0,totalGiveNum:0,totalIncreaseAmount:0,totalGiveAmount:0,rePay:0,payChannel:0,residueNum:0,residueAmount:0,createTime:"",number:"",cardType:0},cardEditFormPetDtos:{},cardEditForm:{id:0,number:"",expireDate:"",petIds:[],vipId:""},vipForm:{ownerId:"",number:"",increaseNum:"",giveNum:"",increaseAmount:"",giveAmount:"",payChannel:1,cardType:1,vipId:"",belongPets:[],expireDate:""},petForm:{ownerId:"",name:"",coatColor:"",petType:0,breed:"",height:"",weight:"",birthday:"",sex:0,sterilization:0,remark:""},investForm:{increaseNum:"",giveNum:"",increaseAmount:"",giveAmount:"",payChannel:"",vipId:"",id:""},petDtos:[],cardTypes:[{label:"综合卡",value:1},{label:"美容卡",value:2},{label:"疫苗卡",value:3},{label:"洗澡卡",value:4}],payChannels:[],petsCheck:[],picFocusStatus:!1,rules:{number:[{required:!0,message:"请输入会员卡号",trigger:"blur"}],name:[{required:!0,message:"请输入宠物昵称",trigger:"blur"}],increaseAmount:[{required:!0,message:"请输入充值金额",trigger:"blur"}],vipId:[{required:!0,message:"请选择会员级别",trigger:"blur"}],increaseNum:[{required:!0,message:"请输入充值次数",trigger:"blur"}]},ownerAddFormRules:{name:[{required:!0,message:"请输入会员姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入会员手机号",trigger:"blur"},{validator:s.a,trigger:"blur"}]}}},mounted:function(){this.getOwners(),this.getVipLevels(),this.getPayChannel()},filters:{cardTypes:function(e){return 1===e?"综合卡":2===e?"美容卡":3===e?"疫苗卡":"洗澡卡"},formatDate:function(e){return r.tool.dateFormat(e)}},methods:{getOwners:function(){var e=this;Object(i.a)({url:"/api/owner/list",method:"get",params:{pageNum:this.pageNum,pageSize:this.pageSize,str:this.searchValue},success:function(t){e.owners=t.data.data,e.tableData=t.data.data.list},fail:function(e){console.log(e)}},this)},getVipLevels:function(){var e=this;Object(i.a)({url:"/api/userVip/list",method:"get",success:function(t){e.category=t.data.data},fail:function(e){console.log(e)}},this)},saveOwnersInfo:function(){var e=this;this.$refs.form.validate(function(t){t&&(1===e.info?Object(i.a)({url:"/api/owner/edit",method:"post",data:e.form,success:function(t){200===t.data.code?(e.$message({message:"修改成功",center:!0,type:"success"}),e.form={},e.dialogFormVisible=!1,e.getOwners()):e.$message({message:"修改失败",center:!0,type:"error"})},fail:function(e){console.log(e)}},e):Object(i.a)({url:"/api/owner/save",method:"post",data:e.form,success:function(t){200===t.data.code?(e.$message({message:"保存成功",center:!0,type:"success"}),e.petForm={},e.dialogFormVisible=!1,e.getOwners()):e.$message({message:"保存失败",center:!0,type:"error"})},fail:function(e){console.log(e)}},e))})},getPayChannel:function(){var e=this;Object(i.a)({url:"/api/payChannel/list",method:"get",success:function(t){e.payChannels=t.data.data},fail:function(e){console.log(e)}},this)},handleCurrentChange:function(e){this.pageNum=e,this.getOwners()},handleSizeChange:function(e){this.pageSize=e,this.getOwners()},ownerEdit:function(e){var t=this;this.$nextTick(function(){t.$refs.form.resetFields()}),this.form={},this.dialogTitle="编辑会员信息",this.dialogFormVisible=!0,this.info=1,Object(i.a)({url:"/api/owner/info",method:"get",params:{id:e},success:function(e){t.form=e.data.data},fail:function(e){console.log(e)}},this)},editCards:function(){var e=this;this.$refs.cardEditForm.validate(function(t){t&&Object(i.a)({url:"/api/userCard/edit",method:"post",data:{id:e.cardEditForm.id,expireDate:e.cardEditForm.expireDate,belongPets:e.cardEditForm.petIds,number:e.cardEditForm.number,vipId:e.cardEditForm.vipId},success:function(t){t.data.data?(e.$message({message:"编辑成功",center:!0,type:"success"}),e.cardEditForm={},e.cardEditDialog=!1,e.getOwners()):e.$message({message:"编辑失败",center:!0,type:"error"})},fail:function(e){console.log(e)}},e)})},addVipCard:function(e,t){var a=this;this.vipForm={ownerId:"",number:"",increaseNum:"",giveNum:"",increaseAmount:"",giveAmount:"",payChannel:1,cardType:1,vipId:"",belongPets:[],expireDate:""},this.tableData[t].hasComprehensiveCard?(this.cardTypes[0].disabled=!0,this.vipForm.cardType=2):(this.cardTypes[0].disabled=!1,this.vipForm.cardType=1),this.$nextTick(function(){a.$refs.vipForm.resetFields()}),this.VipdialogTitle="新增会员卡",this.vipForm.payChannel=1,this.Vipdialog=!0,this.vipForm.ownerId=e,this.petDtos=this.tableData[t].petDtos},cardEdit:function(e,t){var a=this;this.cardEditForm=e,this.cardEditFormPetDtos=t,this.cardEditDialogTitle="编辑会员卡信息",this.$nextTick(function(){a.$refs.cardEditForm.resetFields()}),this.cardEditDialog=!0},addPets:function(e){var t=this;this.petdialogTitle="新增会员宠物",this.petForm={ownerId:"",name:"",coatColor:"",petType:0,breed:"",height:"",weight:"",birthday:"",sex:0,sterilization:0,remark:""},this.$nextTick(function(){t.$refs.petForm.resetFields()}),this.petForm.sex=1,this.petForm.petType=2,this.petdialog=!0,this.petForm.ownerId=e,this.petInfo=1},editPets:function(e){var t=this;this.petdialogTitle="编辑会员宠物",this.petInfo=2,Object(i.a)({url:"/api/pet/info",method:"get",params:{id:e},success:function(e){console.log(e),200===e.data.code?(t.petForm=e.data.data,t.petdialog=!0):t.$message({message:"查询宠物信息失败",center:!0,type:"error"})},fail:function(e){console.log(e)}},this)},savePets:function(){var e=this;this.$refs.petForm.validate(function(t){t&&(1===e.petInfo?Object(i.a)({url:"/api/pet/save",method:"post",data:e.petForm,success:function(t){200===t.data.code?(e.$message({message:"保存成功",center:!0,type:"success"}),e.vipForm={},e.petdialog=!1,e.getOwners()):e.$message({message:"保存失败",center:!0,type:"error"})},fail:function(e){console.log(e)}},e):2===e.petInfo&&Object(i.a)({url:"/api/pet/edit",method:"post",data:e.petForm,success:function(t){200===t.data.code?(e.$message({message:"编辑成功",center:!0,type:"success"}),e.vipForm={},e.petdialog=!1,e.getOwners()):e.$message({message:"编辑失败",center:!0,type:"error"})},fail:function(e){console.log(e)}},e))})},delPets:function(e,t){var a=this;this.$confirm("此操作将删除 "+t+" 宠物信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(i.a)({url:"/api/pet/del",method:"get",params:{id:e},success:function(e){a.$message({message:"已删除",center:!0,type:"success"}),a.getOwners()},fail:function(e){console.log(e)}},a)}).catch(function(){a.$message({type:"info",center:!0,message:"已取消"})})},repay:function(e){var t=this;Object(i.a)({url:"/api/userCard/getRePayInfo",method:"get",params:{id:e},success:function(e){console.log(e),200===e.data.code?(t.repayForm=e.data.data,t.repayForm.payChannel=1,t.repayDialog=!0):t.$message({message:"退卡校验失败",center:!0,type:"error"})},fail:function(e){console.log(e)}},this)},repayReal:function(e){var t=this;Object(i.a)({url:"/api/userCard/repay",method:"post",data:{cardId:this.repayForm.cardId,rePayAmount:this.repayForm.rePay,rePayType:this.repayForm.payChannel},success:function(e){console.log(e),200===e.data.code?(t.$message({message:"退卡成功",center:!0,type:"success"}),t.repayDialog=!1,t.repayForm={},t.getOwners()):t.$message({message:"退卡失败",center:!0,type:"error"})},fail:function(e){console.log(e)}},this)},recharge:function(e){var t=this;this.investType=e.cardType,this.investForm.increaseNum="",this.investForm.giveNum="",this.investForm.increaseAmount="",this.investForm.giveAmount="",this.investForm.id=e.id,this.investForm.vipId=e.vipId,this.investForm.payChannel=1,this.$nextTick(function(){t.$refs.investForm.resetFields()}),this.investdialog=!0},saveinvests:function(){var e=this;this.$refs.investForm.validate(function(t){t&&Object(i.a)({url:"/api/userCard/topUp",method:"post",data:e.investForm,success:function(t){console.log(t),200===t.data.code?(e.$message({message:"充值成功",center:!0,type:"success"}),e.form={},e.investdialog=!1,e.getOwners()):e.$message({message:"充值失败",center:!0,type:"error"})},fail:function(e){console.log(e)}},e)})},recordSizeChange:function(e){this.recordpageSize=e,this.record(this.recordType,this.payCardId)},recordCurrentChange:function(e){this.recordpageNum=e,this.record(this.recordType,this.payCardId)},record:function(e,t){var a=this;this.recordType=e,this.payCardId=t,this.recordTableVisible=!0,Object(i.a)({url:"/api/userCard/payRecord",method:"get",params:{id:this.payCardId,pageNum:this.recordpageNum,pageSize:this.recordpageSize},success:function(e){a.payRecord=e.data.data,a.gridData=e.data.data.list,console.log(e)},fail:function(e){console.log(e)}},this)},revoke:function(e){var t=this;this.$confirm("此操作将撤销该充值记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(i.a)({url:"/api/userCard/cancelPay",method:"get",params:{id:e},success:function(e){t.record(t.recordType,t.payCardId),t.getOwners()},fail:function(e){console.log(e)}},t)}).catch(function(){t.$message({type:"info",center:!0,message:"已取消"})})},getCardNum:function(){var e=this;Object(i.a)({url:"/api/userCard/incrCardNum",method:"get",success:function(t){e.$refs.id.focus(),e.$set(e.vipForm,"number",t.data.data)},fail:function(e){console.log(e)}},this)},cardNumExist:function(){""!==this.vipForm.number&&null!=this.vipForm.number&&Object(i.a)({url:"/api/userCard/cardNumExist",method:"get",params:{cardNum:this.vipForm.number},success:function(e){return e.data.data},fail:function(e){console.log(e)}},this)},saveVipCard:function(){var e=this;this.$refs.vipForm.validate(function(t){t&&(e.vipForm.belongPets=e.bePets,Object(i.a)({url:"/api/userCard/save",method:"post",data:e.vipForm,success:function(t){console.log(t),200===t.data.code?(e.$message({message:"保存成功",center:!0,type:"success"}),e.form={},e.Vipdialog=!1,e.getOwners()):e.$message({message:"保存失败",center:!0,type:"error"})},fail:function(e){console.log(e)}},e))})},ownerAdd:function(){var e=this;this.form={name:"",phone:"",birthday:"",sex:1,addr:"",remark:""},this.info=2,this.dialogTitle="新增会员信息",this.$nextTick(function(){e.$refs.form.resetFields()}),this.dialogFormVisible=!0},ownerDelete:function(e){var t=this;this.$confirm("此操作将删除该会员信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(i.a)({url:"/api/owner/del",method:"get",params:{id:e},success:function(e){t.$message({message:"已删除",center:!0,type:"success"}),t.getOwners()},fail:function(e){console.log(e)}},t)}).catch(function(){t.$message({type:"info",center:!0,message:"已取消"})})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"search"},[a("div",{staticClass:"frame"},[a("el-input",{staticClass:"input-with-select",attrs:{size:"medium",placeholder:"会员名称、手机号"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e._v(" "),a("div",{staticClass:"frame-btn"},[a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-search",round:""},on:{click:e.getOwners}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"danger",round:"",icon:"el-icon-plus"},on:{click:e.ownerAdd}},[e._v("新增")])],1)]),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"姓名",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"手机号",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.phone)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"会员卡",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.cardDtos,function(i,r){return a("el-popover",{key:r,attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("卡号: "+e._s(i.number))]),e._v(" "),1===i.cardType?a("p",[e._v("会员级别: "+e._s(i.vipName))]):e._e(),e._v(" "),1===i.cardType?a("p",[e._v("结余："+e._s(i.residueAmount)+"元")]):a("p",[e._v("结余："+e._s(i.residueNum)+"次")]),e._v(" "),a("p",[e._v("发卡时间："+e._s(i.createTime))]),e._v(" "),a("p",[e._v("有效期："+e._s(i.expireDate))]),e._v(" "),a("div",[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(t){return e.recharge(i)}}},[e._v("充值")]),e._v(" "),a("el-button",{attrs:{size:"mini",round:""},on:{click:function(t){return e.record(i.cardType,i.id)}}},[e._v("记录")]),e._v(" "),a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){return e.cardEdit(i,t.row.petDtos)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",round:""},on:{click:function(t){return e.repay(i.id)}}},[e._v("退卡")])],1),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-button",{attrs:{size:"small"}},[e._v(e._s(e._f("cardTypes")(i.cardType)))])],1)])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"宠物",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.petDtos,function(t,i){return a("el-popover",{key:i,attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("品种: "+e._s(t.breed))]),e._v(" "),a("p",[e._v("备注: "+e._s(t.remark))]),e._v(" "),a("div",[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){return e.editPets(t.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){return e.delPets(t.id,t.name)}}},[e._v("删除")])],1),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-button",{attrs:{size:"small"}},[e._v(e._s(t.name))])],1)])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"备注",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.remark)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn-style",attrs:{icon:"el-icon-edit",size:"mini",round:""},on:{click:function(a){return e.ownerEdit(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"btn-style",attrs:{icon:"el-icon-plus",size:"mini",round:""},on:{click:function(a){return e.addVipCard(t.row.id,t.$index)}}},[e._v("加卡")]),e._v(" "),a("br"),e._v(" "),a("el-button",{staticClass:"btn-style",attrs:{icon:"el-icon-plus",size:"mini",round:""},on:{click:function(a){return e.addPets(t.row.id)}}},[e._v("宠物")]),e._v(" "),a("el-button",{staticClass:"btn-style",attrs:{type:"danger",icon:"el-icon-delete",size:"mini",round:""},on:{click:function(a){return e.ownerDelete(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,width:"700px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.ownerAddFormRules}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth,prop:"name"}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"手机号码","label-width":e.formLabelWidth,prop:"phone"}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"生日","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{size:"medium","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:2},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("女")])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"联系地址","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.form.addr,callback:function(t){e.$set(e.form,"addr",t)},expression:"form.addr"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium",type:"textarea",rows:2,"auto-complete":"off"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary",round:""},on:{click:e.saveOwnersInfo}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.VipdialogTitle,visible:e.Vipdialog,width:"700px"},on:{"update:visible":function(t){e.Vipdialog=t}}},[a("el-form",{ref:"vipForm",attrs:{model:e.vipForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"卡号","label-width":e.formLabelWidth,prop:"number"}},[a("span",{staticClass:"right_input"},[a("el-input",{ref:"id",attrs:{size:"medium","auto-complete":"off"},on:{blur:e.cardNumExist},model:{value:e.vipForm.number,callback:function(t){e.$set(e.vipForm,"number","string"==typeof t?t.trim():t)},expression:"vipForm.number"}},[a("el-button",{attrs:{slot:"append",size:"medium"},on:{click:e.getCardNum},slot:"append"},[e._v("获取卡号")])],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"会员卡类型","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-select",{staticStyle:{width:"300px"},attrs:{slot:"prepend",size:"medium",placeholder:"请选择"},slot:"prepend",model:{value:e.vipForm.cardType,callback:function(t){e.$set(e.vipForm,"cardType",t)},expression:"vipForm.cardType"}},e._l(e.cardTypes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"有效期","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{size:"medium","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.vipForm.expireDate,callback:function(t){e.$set(e.vipForm,"expireDate",t)},expression:"vipForm.expireDate"}})],1)]),e._v(" "),1===e.vipForm.cardType?a("el-form-item",{attrs:{label:"充值金额","label-width":e.formLabelWidth,prop:"increaseAmount"}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.vipForm.increaseAmount,callback:function(t){e.$set(e.vipForm,"increaseAmount",t)},expression:"vipForm.increaseAmount"}})],1)]):a("el-form-item",{attrs:{label:"充值次数","label-width":e.formLabelWidth,prop:"increaseNum"}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.vipForm.increaseNum,callback:function(t){e.$set(e.vipForm,"increaseNum",t)},expression:"vipForm.increaseNum"}})],1)]),e._v(" "),1===e.vipForm.cardType?a("el-form-item",{attrs:{label:"赠送金额","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.vipForm.giveAmount,callback:function(t){e.$set(e.vipForm,"giveAmount",t)},expression:"vipForm.giveAmount"}})],1)]):a("el-form-item",{attrs:{label:"赠送次数","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.vipForm.giveNum,callback:function(t){e.$set(e.vipForm,"giveNum",t)},expression:"vipForm.giveNum"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"支付方式","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-select",{staticStyle:{width:"300px"},attrs:{slot:"prepend",size:"medium",placeholder:"请选择"},slot:"prepend",model:{value:e.vipForm.payChannel,callback:function(t){e.$set(e.vipForm,"payChannel",t)},expression:"vipForm.payChannel"}},e._l(e.payChannels,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),1!=e.vipForm.cardType?a("el-form-item",{attrs:{label:"收取金额","label-width":e.formLabelWidth,prop:"increaseAmount"}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.vipForm.increaseAmount,callback:function(t){e.$set(e.vipForm,"increaseAmount",t)},expression:"vipForm.increaseAmount"}})],1)]):e._e(),e._v(" "),1===e.vipForm.cardType?a("el-form-item",{attrs:{label:"会员级别","label-width":e.formLabelWidth,prop:"vipId"}},[a("span",{staticClass:"right_input"},[a("el-select",{staticStyle:{width:"300px"},attrs:{slot:"prepend",size:"medium",placeholder:"请选择"},slot:"prepend",model:{value:e.vipForm.vipId,callback:function(t){e.$set(e.vipForm,"vipId",t)},expression:"vipForm.vipId"}},e._l(e.category,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)]):e._e(),e._v(" "),1!==e.vipForm.cardType?a("el-form-item",{attrs:{label:"所属宠物","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-checkbox-group",{attrs:{size:"medium"},model:{value:e.bePets,callback:function(t){e.bePets=t},expression:"bePets"}},e._l(e.petDtos,function(t){return a("el-checkbox",{key:t.name,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1)],1)]):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary",round:""},on:{click:e.saveVipCard}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.petdialogTitle,visible:e.petdialog,width:"700px"},on:{"update:visible":function(t){e.petdialog=t}}},[a("el-form",{ref:"petForm",attrs:{model:e.petForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"宠物昵称","label-width":e.formLabelWidth,prop:"name"}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.petForm.name,callback:function(t){e.$set(e.petForm,"name",t)},expression:"petForm.name"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"宠物品种","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.petForm.breed,callback:function(t){e.$set(e.petForm,"breed",t)},expression:"petForm.breed"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"宠物生日","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{size:"medium","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.petForm.birthday,callback:function(t){e.$set(e.petForm,"birthday",t)},expression:"petForm.birthday"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"宠物毛色","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.petForm.coatColor,callback:function(t){e.$set(e.petForm,"coatColor",t)},expression:"petForm.coatColor"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"宠物体重","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium",placeholder:"体重"},model:{value:e.petForm.weight,callback:function(t){e.$set(e.petForm,"weight",t)},expression:"petForm.weight"}},[a("template",{slot:"append"},[e._v("kg")])],2)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"宠物性别","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-radio",{attrs:{size:"medium",border:"",label:1},model:{value:e.petForm.sex,callback:function(t){e.$set(e.petForm,"sex",t)},expression:"petForm.sex"}},[e._v("公")]),e._v(" "),a("el-radio",{attrs:{size:"medium",border:"",label:2},model:{value:e.petForm.sex,callback:function(t){e.$set(e.petForm,"sex",t)},expression:"petForm.sex"}},[e._v("母")])],1)]),e._v(" "),a("el-form-item",{attrs:{label:"宠物类别","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input",staticStyle:{width:"400px"}},[a("el-radio-group",{attrs:{size:"medium"},model:{value:e.petForm.petType,callback:function(t){e.$set(e.petForm,"petType",t)},expression:"petForm.petType"}},[a("el-radio",{attrs:{border:"",label:2}},[e._v("狗")]),e._v(" "),a("el-radio",{attrs:{border:"",label:1}},[e._v("猫")]),e._v(" "),a("el-radio",{attrs:{border:"",label:3}},[e._v("其他")])],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"是否绝育","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-switch",{attrs:{size:"medium","active-value":1,"inactive-value":0},model:{value:e.petForm.sterilization,callback:function(t){e.$set(e.petForm,"sterilization",t)},expression:"petForm.sterilization"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium",type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.petForm.remark,callback:function(t){e.$set(e.petForm,"remark",t)},expression:"petForm.remark"}})],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary",round:""},on:{click:e.savePets}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.cardEditDialogTitle,visible:e.cardEditDialog,width:"700px"},on:{"update:visible":function(t){e.cardEditDialog=t}}},[a("el-form",{ref:"cardEditForm",attrs:{model:e.cardEditForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"会员卡号","label-width":e.formLabelWidth,prop:"number"}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.cardEditForm.number,callback:function(t){e.$set(e.cardEditForm,"number",t)},expression:"cardEditForm.number"}})],1)]),e._v(" "),1===e.cardEditForm.cardType?a("el-form-item",{attrs:{label:"会员级别","label-width":e.formLabelWidth,prop:"vipId"}},[a("span",{staticClass:"right_input"},[a("el-select",{staticStyle:{width:"300px"},attrs:{slot:"prepend",size:"medium",placeholder:"请选择"},slot:"prepend",model:{value:e.cardEditForm.vipId,callback:function(t){e.$set(e.cardEditForm,"vipId",t)},expression:"cardEditForm.vipId"}},e._l(e.category,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"有效期","label-width":e.formLabelWidth}},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{size:"medium","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.cardEditForm.expireDate,callback:function(t){e.$set(e.cardEditForm,"expireDate",t)},expression:"cardEditForm.expireDate"}})],1),e._v(" "),1!==e.cardEditForm.cardType?a("el-form-item",{attrs:{label:"所属宠物","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-checkbox-group",{attrs:{size:"medium"},model:{value:e.cardEditForm.petIds,callback:function(t){e.$set(e.cardEditForm,"petIds",t)},expression:"cardEditForm.petIds"}},e._l(e.cardEditFormPetDtos,function(t){return a("el-checkbox",{key:t.name,attrs:{label:t.id}},[e._v(e._s(t.name))])}),1)],1)]):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary",round:""},on:{click:function(t){return e.editCards()}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.repayDialogTitle,visible:e.repayDialog,width:"700px"},on:{"update:visible":function(t){e.repayDialog=t}}},[a("el-form",{ref:"repayForm",attrs:{model:e.repayForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"会员卡号：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[e._v(e._s(e.repayForm.number))])]),e._v(" "),a("el-form-item",{attrs:{label:"开卡时间：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[e._v(e._s(e.repayForm.createTime))])]),e._v(" "),a("el-form-item",{attrs:{label:"总充值金额：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[e._v(e._s(e.repayForm.totalIncreaseAmount))])]),e._v(" "),1===e.repayForm.cardType?a("el-form-item",{attrs:{label:"总赠送金额：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[e._v(e._s(e.repayForm.totalGiveAmount))])]):e._e(),e._v(" "),1===e.repayForm.cardType?a("el-form-item",{attrs:{label:"卡内余额：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[e._v(e._s(e.repayForm.residueAmount))])]):e._e(),e._v(" "),1!==e.repayForm.cardType?a("el-form-item",{attrs:{label:"总充值次数：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[e._v(e._s(e.repayForm.totalIncreaseNum))])]):e._e(),e._v(" "),1!==e.repayForm.cardType?a("el-form-item",{attrs:{label:"总赠送次数：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[e._v(e._s(e.repayForm.totalGiveNum))])]):e._e(),e._v(" "),1!==e.repayForm.cardType?a("el-form-item",{attrs:{label:"剩余次数：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[e._v(e._s(e.repayForm.residueNum))])]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"应退金额：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.repayForm.rePay,callback:function(t){e.$set(e.repayForm,"rePay",t)},expression:"repayForm.rePay"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"支付方式：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-select",{staticStyle:{width:"300px"},attrs:{slot:"prepend",size:"medium",placeholder:"请选择"},slot:"prepend",model:{value:e.repayForm.payChannel,callback:function(t){e.$set(e.repayForm,"payChannel",t)},expression:"repayForm.payChannel"}},e._l(e.payChannels,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary",round:""},on:{click:function(t){return e.repayReal(e.repayForm.cardId)}}},[e._v("退卡")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.investdialogTitle,visible:e.investdialog,width:"700px"},on:{"update:visible":function(t){e.investdialog=t}}},[a("el-form",{ref:"investForm",attrs:{model:e.investForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"充值金额","label-width":e.formLabelWidth,prop:"increaseAmount"}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.investForm.increaseAmount,callback:function(t){e.$set(e.investForm,"increaseAmount",t)},expression:"investForm.increaseAmount"}})],1)]),e._v(" "),1===this.investType?a("el-form-item",{attrs:{label:"赠送金额","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.investForm.giveAmount,callback:function(t){e.$set(e.investForm,"giveAmount",t)},expression:"investForm.giveAmount"}})],1)]):e._e(),e._v(" "),1!==this.investType?a("el-form-item",{attrs:{label:"充值次数","label-width":e.formLabelWidth,prop:"increaseNum"}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.investForm.increaseNum,callback:function(t){e.$set(e.investForm,"increaseNum",t)},expression:"investForm.increaseNum"}})],1)]):e._e(),e._v(" "),1!==this.investType?a("el-form-item",{attrs:{label:"赠送次数","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.investForm.giveNum,callback:function(t){e.$set(e.investForm,"giveNum",t)},expression:"investForm.giveNum"}})],1)]):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"支付方式","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-select",{staticStyle:{width:"300px"},attrs:{slot:"prepend",size:"medium",placeholder:"请选择"},slot:"prepend",model:{value:e.investForm.payChannel,callback:function(t){e.$set(e.investForm,"payChannel",t)},expression:"investForm.payChannel"}},e._l(e.payChannels,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),1===this.investType?a("el-form-item",{attrs:{label:"会员级别","label-width":e.formLabelWidth,prop:"vipId"}},[a("span",{staticClass:"right_input"},[a("el-select",{staticStyle:{width:"300px"},attrs:{slot:"prepend",size:"medium",placeholder:"请选择"},slot:"prepend",model:{value:e.investForm.vipId,callback:function(t){e.$set(e.investForm,"vipId",t)},expression:"investForm.vipId"}},e._l(e.category,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)]):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",type:"primary",round:""},on:{click:e.saveinvests}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"充值记录",visible:e.recordTableVisible,width:"1000px"},on:{"update:visible":function(t){e.recordTableVisible=t}}},[a("el-table",{attrs:{data:e.gridData}},[1!==this.recordType?a("el-table-column",{attrs:{align:"center",label:"充值次数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.increaseNum)+"\n      ")]}}],null,!1,2740978863)}):e._e(),e._v(" "),1!==this.recordType?a("el-table-column",{attrs:{align:"center",label:"赠送次数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.giveNum)+"\n      ")]}}],null,!1,909680214)}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"充值金额",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.increaseAmount)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"赠送金额",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.giveAmount)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"支付费用",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.increaseAmount)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"支付方式",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.payChannelDesc)+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"充值时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("formatDate")(t.row.createTime))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"撤销",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-delete",size:"small",round:""},on:{click:function(a){return e.revoke(t.row.id)}}},[e._v("撤销")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-size":10,background:"",layout:"total, prev, pager, next",total:e.payRecord.total},on:{"size-change":e.recordSizeChange,"current-change":e.recordCurrentChange}})],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-size":10,background:"",layout:"total, prev, pager, next",total:e.owners.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(o,l,!1,function(e){a("NUed")},"data-v-1bedcc2a",null);t.default=n.exports}});