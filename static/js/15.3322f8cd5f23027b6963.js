webpackJsonp([15],{KRM9:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("vQ9I"),o={data:function(){return{tableData:[],form:{name:"",prdtDiscountRatio:"",serveDiscountRatio:"",entrustDiscountRatio:""},formLabelWidth:"200px",dialogFormVisible:!1,dialogTitle:"",cellWidth:"",info:0,rules:{name:[{required:!0,message:"请输入会员等级名称",trigger:"blur"}],prdtDiscountRatio:[{required:!0,message:"请输入商品消费折扣",trigger:"blur"}],serveDiscountRatio:[{required:!0,message:"请输入服务消费折扣",trigger:"blur"}],entrustDiscountRatio:[{required:!0,message:"请输入寄养消费折扣",trigger:"blur"}]}}},mounted:function(){this.getVips()},methods:{getVips:function(){var t=this;Object(s.a)({url:"/api/userVip/list",method:"get",success:function(e){t.tableData=e.data.data},fail:function(t){console.log(t)}},this)},handleAdd:function(){var t=this;this.form={name:"",prdtDiscountRatio:"",serveDiscountRatio:"",entrustDiscountRatio:""},this.$nextTick(function(){t.$refs.form.resetFields()}),this.info=2,this.dialogTitle="新增会员级别",this.dialogFormVisible=!0},handleEdit:function(t){var e=this;this.form={name:"",prdtDiscountRatio:"",serveDiscountRatio:"",entrustDiscountRatio:""},this.$nextTick(function(){e.$refs.form.resetFields()}),this.info=1,this.dialogTitle="编辑会员级别",this.dialogFormVisible=!0,Object(s.a)({url:"/api/userVip/info",method:"get",params:{id:t},success:function(t){e.form=t.data.data},fail:function(t){console.log(t)}},this)},saveVipInfo:function(){var t=this;this.$refs.form.validate(function(e){e&&(1===t.info?Object(s.a)({url:"/api/userVip/edit",method:"post",data:{id:t.form.id,name:t.form.name,prdtDiscountRatio:t.form.prdtDiscountRatio,serveDiscountRatio:t.form.serveDiscountRatio,entrustDiscountRatio:t.form.entrustDiscountRatio},success:function(e){200===e.data.code?(t.$message({message:"修改成功",center:!0,type:"success"}),t.form={},t.dialogFormVisible=!1,t.getVips()):t.$message({message:"修改失败",center:!0,type:"error"})},fail:function(t){console.log(t)}},t):Object(s.a)({url:"/api/userVip/save",method:"post",data:{name:t.form.name,prdtDiscountRatio:t.form.prdtDiscountRatio,serveDiscountRatio:t.form.serveDiscountRatio,entrustDiscountRatio:t.form.entrustDiscountRatio},success:function(e){200===e.data.code?(t.$message({message:"添加成功",center:!0,type:"success"}),t.form={},t.dialogFormVisible=!1,t.getVips()):t.$message({message:"添加失败",center:!0,type:"error"})},fail:function(t){console.log(t)}},t))})},handleDelete:function(t){var e=this;this.$confirm("此操作将删除该会员级别, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(s.a)({url:"/api/userVip/del",method:"get",params:{id:t},success:function(t){e.$message({message:"已删除",center:!0,type:"success"}),e.getVips()},fail:function(t){console.log(t)}},e)}).catch(function(){e.$message({type:"info",center:!0,message:"已取消"})})}}},a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page"},[i("div",[t._l(t.tableData,function(e){return i("el-card",{key:e.id,staticClass:"box-card",attrs:{shadow:"hover"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("h3",[t._v(t._s(e.name)+"\n        "),i("el-button",{staticStyle:{float:"right",margin:"0px 3px"},attrs:{size:"mini",icon:"el-icon-delete",round:"",type:"danger"},on:{click:function(i){return t.handleDelete(e.id)}}}),t._v(" "),i("el-button",{staticStyle:{float:"right",margin:"0px 3px"},attrs:{size:"mini",icon:"el-icon-edit",round:""},on:{click:function(i){return t.handleEdit(e.id)}}})],1)]),t._v(" "),i("div",{staticClass:"card-c"},[i("el-tag",[t._v("商品折扣:"),i("span",{staticClass:"ratioNum"},[t._v(t._s(e.prdtDiscountRatio)+"%")])]),t._v(" "),i("el-tag",[t._v("服务折扣:"),i("span",{staticClass:"ratioNum"},[t._v(t._s(e.serveDiscountRatio)+"%")])]),t._v(" "),i("el-tag",[t._v("寄养折扣:"),i("span",{staticClass:"ratioNum"},[t._v(t._s(e.entrustDiscountRatio)+"%")])])],1)])}),t._v(" "),i("el-card",{staticClass:"box-card box-card2",attrs:{shadow:"hover"}},[i("div",{staticClass:"box-card-add",on:{click:t.handleAdd}},[i("div",{staticClass:"box-card-add-div"},[i("i",{staticClass:"el-icon-plus"}),t._v("新增会员级别")])])])],2),t._v(" "),i("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible,width:"700px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[i("el-form-item",{attrs:{label:"会员级别：","label-width":t.formLabelWidth,prop:"name"}},[i("span",{staticClass:"right_input"},[i("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]),t._v(" "),i("el-form-item",{attrs:{label:"商品消费折扣：","label-width":t.formLabelWidth,prop:"prdtDiscountRatio"}},[i("span",{staticClass:"right_input"},[i("el-input",{attrs:{size:"medium",type:"number",maxlength:"3","auto-complete":"off"},model:{value:t.form.prdtDiscountRatio,callback:function(e){t.$set(t.form,"prdtDiscountRatio",e)},expression:"form.prdtDiscountRatio"}},[i("template",{slot:"append"},[t._v("%")])],2)],1)]),t._v(" "),i("el-form-item",{attrs:{label:"服务消费折扣：","label-width":t.formLabelWidth,prop:"serveDiscountRatio"}},[i("span",{staticClass:"right_input"},[i("el-input",{attrs:{size:"medium",type:"number",maxlength:"3","auto-complete":"off"},model:{value:t.form.serveDiscountRatio,callback:function(e){t.$set(t.form,"serveDiscountRatio",e)},expression:"form.serveDiscountRatio"}},[i("template",{slot:"append"},[t._v("%")])],2)],1)]),t._v(" "),i("el-form-item",{attrs:{label:"寄养消费折扣：","label-width":t.formLabelWidth,prop:"entrustDiscountRatio"}},[i("span",{staticClass:"right_input"},[i("el-input",{attrs:{size:"medium",type:"number",maxlength:"3","auto-complete":"off"},model:{value:t.form.entrustDiscountRatio,callback:function(e){t.$set(t.form,"entrustDiscountRatio",e)},expression:"form.entrustDiscountRatio"}},[i("template",{slot:"append"},[t._v("%")])],2)],1)])],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{round:""},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",round:""},on:{click:t.saveVipInfo}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=i("C7Lr")(o,a,!1,function(t){i("UogI")},"data-v-25be9298",null);e.default=n.exports},UogI:function(t,e){}});