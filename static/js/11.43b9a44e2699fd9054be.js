webpackJsonp([11],{"/z/N":function(e,t){},"52k4":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("IHPB"),i=a.n(l),s=a("vQ9I"),r={data:function(){return{searchValue:"",select:"",prdts:{},tableData:[],dialogTitle:"",dialogFormVisible:!1,prdtTypes:[],prdtMtypes:[{label:"全部",value:""}],cellWidth:"",form:{name:null,prdtTypes:null,salePrice:null},formLabelWidth:"150px",info:0,pageNum:1,pageSize:10,serType:0,applyPet:[{key:2,value:"狗用",label:"狗用"},{key:1,value:"猫用",label:"猫用"},{key:3,value:"猫狗共用",label:"猫狗共用"},{key:4,value:"小宠",label:"小宠"},{key:5,value:"其他",label:"其他"}],typeChildren:[],active:-1,cactive:-1,prdtType:"",prdtDetailType:"",rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],prdtTypes:[{required:!0,message:"请选择产品类别",trigger:"blur"}],salePrice:[{required:!0,message:"请输入销售价格",trigger:"blur"}]},autoPadding:"自动填充"}},mounted:function(){this.getPrdt(),this.getPrdtType()},methods:{getPrdt:function(){var e=this;Object(s.a)({url:"/api/prdt/list",method:"get",params:{pageNum:this.pageNum,pageSize:this.pageSize,name:this.searchValue,prdtType:this.prdtType,prdtDetailType:this.prdtDetailType},success:function(t){e.prdts=t.data.data,e.tableData=t.data.data.list},fail:function(e){console.log(e)}},this)},prdtEdit:function(e){var t=this;this.form={name:null,prdtTypes:null,salePrice:null},this.info=1,this.dialogTitle="编辑商品服务",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.form.resetFields()}),Object(s.a)({url:"/api/prdt/info",method:"get",params:{id:e},success:function(e){t.form=e.data.data},fail:function(e){console.log(e)}},this)},savePrdtsInfo:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.form.prdtType=e.form.prdtTypes[0],e.form.prdtDetailType=e.form.prdtTypes[1],1===e.info?Object(s.a)({url:"/api/prdt/edit",method:"post",data:e.form,success:function(t){200===t.data.code?(e.$message({message:"编辑成功",center:!0,type:"success"}),e.form={},e.dialogFormVisible=!1,e.getPrdt()):e.$message({message:"编辑失败",center:!0,type:"error"})},fail:function(e){console.log(e)}},e):Object(s.a)({url:"/api/prdt/save",method:"post",data:e.form,success:function(t){200===t.data.code?(e.$message({message:"新增成功",center:!0,type:"success"}),e.form={},e.dialogFormVisible=!1,e.getPrdt()):e.$message({message:"新增失败",center:!0,type:"error"})},fail:function(e){console.log(e)}},e))})},getTypeId:function(e){var t;(this.prdtType=this.prdtMtypes[e].value,this.typeChildren=[],this.active=e,this.cactive=0,0!==e)&&((t=this.typeChildren).push.apply(t,i()(this.prdtMtypes[e].children)),this.typeChildren.unshift({label:"全部",value:""}));this.prdtDetailType="",this.getPrdt()},getcTypeId:function(e){this.cactive=e,this.prdtDetailType=this.typeChildren[e].value,this.getPrdt()},prdtAdd:function(){var e=this;this.form={name:null,prdtTypes:null,salePrice:null},this.info=2,this.dialogTitle="新增商品服务",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.form.resetFields()}),this.discount=""},buildPrdtInfo:function(){var e=this;null!=this.form.barCode&&""!==this.form.barCode.trim()?(this.autoPadding="请稍后...",Object(s.a)({url:"/api/prdt/barcode",method:"get",params:{code:this.form.barCode},success:function(t){e.autoPadding="自动填充",e.form.name=t.data.data.goodsName,e.form.brand=t.data.data.brand,e.form.salePrice=t.data.data.price,e.form.specification=t.data.data.standard},fail:function(e){this.autoPadding="自动填充",console.log(e)}},this)):this.$message({message:"请输入条形码",center:!0,type:"info"})},getPrdtType:function(){var e=this;Object(s.a)({url:"/api/prdt/getPrdtTypes",method:"get",success:function(t){var a;(a=e.prdtMtypes).push.apply(a,i()(t.data.data)),e.prdtTypes=t.data.data},fail:function(e){console.log(e)}},this)},handleCurrentChange:function(e){this.pageNum=e,this.getPrdt()},prdtDelete:function(e){var t=this;this.$confirm("此操作将删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){Object(s.a)({url:"/api/prdt/del",method:"get",params:{id:e},success:function(e){t.$message({message:"已删除",center:!0,type:"success"}),t.getPrdt()},fail:function(e){console.log(e)}},t)}).catch(function(){t.$message({type:"info",center:!0,message:"已取消"})})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"search"},[a("div",{staticClass:"frame"},[a("el-input",{staticClass:"input-with-select",attrs:{size:"medium",placeholder:"商品名称、品牌、条形码",clearable:""},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e._v(" "),a("div",{staticClass:"frame-btn"},[a("el-button",{attrs:{size:"medium",type:"primary",icon:"el-icon-search",round:""},on:{click:e.getPrdt}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"danger",round:"",icon:"el-icon-plus"},on:{click:e.prdtAdd}},[e._v("新增")])],1)]),e._v(" "),a("div",{staticClass:"search-btn"},[a("ul",e._l(e.prdtMtypes,function(t,l){return a("li",{key:l,class:e.active==l?"addclass":"",on:{click:function(t){return e.getTypeId(l)}}},[a("div",[e._v(e._s(t.label))])])}),0)]),e._v(" "),a("div",{staticClass:"search-btn"},[a("ul",e._l(e.typeChildren,function(t,l){return a("li",{key:l,class:e.cactive==l?"addclass":"",on:{click:function(t){return e.getcTypeId(l)}}},[a("div",[e._v(e._s(t.label))])])}),0)]),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"prdt-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"条 形 码：","label-width":"90px"}},[a("span",[e._v(e._s(t.row.barCode))])]),e._v(" "),a("el-form-item",{attrs:{label:"适用宠物：","label-width":"90px"}},[a("span",[e._v(e._s(t.row.applyPetStr))])]),e._v(" "),a("el-form-item",{attrs:{label:"商品类型：","label-width":"90px"}},[a("span",[e._v(e._s(t.row.prdtTypeStr)+"/"+e._s(t.row.prdtDetailTypeStr))])]),e._v(" "),a("el-form-item",{attrs:{label:"到期时间：","label-width":"90px"}},[a("span",[e._v(e._s(t.row.dueDate))])]),e._v(" "),a("el-form-item",{attrs:{label:"规  格：","label-width":"90px"}},[a("span",[e._v(e._s(t.row.specification))])]),e._v(" "),a("el-form-item",{attrs:{label:"单  位：","label-width":"90px"}},[a("span",[e._v(e._s(t.row.unit))])]),e._v(" "),a("el-form-item",{attrs:{label:"进 货 价：","label-width":"90px"}},[a("span",[e._v(e._s(t.row.purchasingCost))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"编号",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.prdtNum))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"名称",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:t.row.name,placement:"top"}},[a("div",{staticClass:"cell-name-div"},[e._v(e._s(t.row.name))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n           "+e._s(t.row.brand)+"\n         ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"售价",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n       "+e._s(t.row.salePrice)+"\n     ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"库存",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n       "+e._s(t.row.residueInventory)+"\n     ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:e.cellWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-edit",size:"small",round:""},on:{click:function(a){return e.prdtEdit(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",round:""},on:{click:function(a){return e.prdtDelete(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,width:"920px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("div",{staticClass:"dialog-goods"},[a("div",[a("el-form-item",{attrs:{label:"条形码：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.form.barCode,callback:function(t){e.$set(e.form,"barCode",t)},expression:"form.barCode"}},[a("el-button",{attrs:{slot:"append",size:"medium"},on:{click:e.buildPrdtInfo},slot:"append"},[e._v(e._s(e.autoPadding))])],1)],1)]),e._v(" "),a("el-form-item",{attrs:{label:"名称：","label-width":e.formLabelWidth,prop:"name"}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"产品类别：","label-width":e.formLabelWidth,prop:"prdtTypes"}},[a("span",{staticClass:"right_input"},[a("el-cascader",{attrs:{size:"medium",options:e.prdtTypes,filterable:"",placeholder:"请选择"},model:{value:e.form.prdtTypes,callback:function(t){e.$set(e.form,"prdtTypes",t)},expression:"form.prdtTypes"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"使用宠物类型：","label-width":e.formLabelWidth}},[a("el-select",{attrs:{size:"medium",filterable:"",placeholder:"请选择"},model:{value:e.form.applyPet,callback:function(t){e.$set(e.form,"applyPet",t)},expression:"form.applyPet"}},e._l(e.applyPet,function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"进货价：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium",type:"number","auto-complete":"off"},model:{value:e.form.purchasingCost,callback:function(t){e.$set(e.form,"purchasingCost",t)},expression:"form.purchasingCost"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"销售价：","label-width":e.formLabelWidth,prop:"salePrice"}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium",type:"number","auto-complete":"off"},model:{value:e.form.salePrice,callback:function(t){e.$set(e.form,"salePrice",t)},expression:"form.salePrice"}})],1)])],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"有效期：","label-width":e.formLabelWidth}},[a("el-date-picker",{attrs:{size:"medium","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.dueDate,callback:function(t){e.$set(e.form,"dueDate",t)},expression:"form.dueDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规格型号：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.form.specification,callback:function(t){e.$set(e.form,"specification",t)},expression:"form.specification"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"品牌：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand",t)},expression:"form.brand"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"初始库存：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium",type:"number","auto-complete":"off"},model:{value:e.form.initialInventory,callback:function(t){e.$set(e.form,"initialInventory",t)},expression:"form.initialInventory"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"剩余库存：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium",type:"number","auto-complete":"off"},model:{value:e.form.residueInventory,callback:function(t){e.$set(e.form,"residueInventory",t)},expression:"form.residueInventory"}})],1)]),e._v(" "),a("el-form-item",{attrs:{label:"单位：","label-width":e.formLabelWidth}},[a("span",{staticClass:"right_input"},[a("el-input",{attrs:{size:"medium","auto-complete":"off"},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1)])],1)])]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium",round:""},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary",round:""},on:{click:e.savePrdtsInfo}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-size":10,background:"",layout:"total, prev, pager, next",total:e.prdts.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var n=a("C7Lr")(r,o,!1,function(e){a("/z/N")},"data-v-72b16e8d",null);t.default=n.exports}});