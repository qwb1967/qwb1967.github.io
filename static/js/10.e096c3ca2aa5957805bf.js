webpackJsonp([10],{"6MAn":function(e,t){},EV1k:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("3cXf"),a=s.n(o),i=s("vQ9I"),r=s("YR7f"),n={data:function(){return{user:"",password:"",form:{phone:"",storeName:"",checkCode:"",loginPwd:""},dialogFormVisible:!1,formLabelWidth:"120px",sending:!0,disabled:!1,second:30,dialogWidth:"550px",rules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:r.a,trigger:"blur"}],storeName:[{required:!0,message:"请输入宠物店名称",trigger:"blur"}],checkCode:[{required:!0,message:"请输入验证码",trigger:"blur"}],loginPwd:[{required:!0,message:"请输入登录密码",trigger:"blur"}]}}},mounted:function(){},methods:{getlogin:function(){var e=this;this.user?this.password?Object(i.a)({url:"/api/idx/login",method:"post",data:{name:this.user,pd:this.password},success:function(t){200===t.data.code?(window.localStorage.setItem("user",a()(t.data.data)),window.location.href=window.location.origin+"/#/",window.location.reload()):e.$message.error("登录失败")},fail:function(e){console.log(e)}}):this.$message.error("密码不能为空"):this.$message.error("用户名不能为空")},register:function(){var e=this;this.dialogFormVisible=!0,this.form={phone:"",storeName:"",checkCode:"",loginPwd:""},this.$nextTick(function(){e.$refs.form.resetFields()})},obtainCode:function(){var e=this;if(null!=this.form.phone&&""!==this.form.phone.trim()){if(/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(this.form.phone)||""===this.form.phone){this.sending=!this.sending,this.sending||(this.disabled=!0);var t=setInterval(function(){--e.second,e.second<0&&(clearInterval(t),e.sending=!0,e.disabled=!1,e.second=30)},1e3);Object(i.a)({url:"/api/idx/smsCode",method:"get",params:{phone:this.form.phone},success:function(t){200===t.data.code?e.$message({message:t.data.data,center:!0,type:"success"}):e.$message({message:t.data.data,center:!0,type:"error"})},fail:function(e){console.log(e)}})}else this.$message({message:"请输入正确的手机号",center:!0,type:"info"})}else this.$message({message:"请输入正确的手机号",center:!0,type:"info"})},saveRegister:function(){var e=this;this.$refs.form.validate(function(t){t&&Object(i.a)({url:"/api/idx/register",method:"post",data:e.form,success:function(t){200===t.data.code?(e.$message({message:"注册成功",center:!0,type:"success"}),e.user=e.form.phone,e.dialogFormVisible=!1):e.$message({message:t.data.data,center:!0,type:"error"})},fail:function(e){console.log(e)}})})}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[s("div",{staticClass:"content"},[s("div",{staticClass:"iput"},[s("h3",[e._v("欢迎登录管理系统")]),e._v(" "),s("el-input",{staticClass:"login_input",attrs:{type:"text","auto-complete":"off",placeholder:"请输入手机号"},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}}),e._v(" "),s("el-input",{staticClass:"login_input",attrs:{type:"password","auto-complete":"off",placeholder:"请输入密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{staticClass:"login_btn",attrs:{round:""},on:{click:e.register}},[e._v("注册")]),e._v(" "),s("el-button",{staticClass:"login_btn",attrs:{type:"danger",round:""},on:{click:e.getlogin}},[e._v("登录")])],1)],1)]),e._v(" "),s("el-dialog",{attrs:{center:"",title:"注册",visible:e.dialogFormVisible,width:e.dialogWidth},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[s("el-form-item",{attrs:{label:"宠物店名称：","label-width":e.formLabelWidth,prop:"storeName"}},[s("span",{staticClass:"right_input"},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.storeName,callback:function(t){e.$set(e.form,"storeName",t)},expression:"form.storeName"}})],1)]),e._v(" "),s("el-form-item",{attrs:{label:"手机号：","label-width":e.formLabelWidth,prop:"phone"}},[s("span",{staticClass:"right_input"},[s("el-input",{attrs:{autocomplete:"off",maxlength:"11"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)]),e._v(" "),s("el-form-item",{attrs:{label:"验证码：","label-width":e.formLabelWidth,prop:"checkCode"}},[s("span",{staticClass:"right_input"},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.checkCode,callback:function(t){e.$set(e.form,"checkCode",t)},expression:"form.checkCode"}},[s("el-button",{attrs:{slot:"append",disabled:e.disabled},on:{click:e.obtainCode},slot:"append"},[e.sending?[e._v("\n              获取验证码\n            ")]:[e._v("\n              "+e._s(e.second)+"秒后重发\n            ")]],2)],1)],1)]),e._v(" "),s("el-form-item",{attrs:{label:"登录密码：","label-width":e.formLabelWidth,prop:"loginPwd"}},[s("span",{staticClass:"right_input"},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.form.loginPwd,callback:function(t){e.$set(e.form,"loginPwd",t)},expression:"form.loginPwd"}})],1)])],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"registerBtn",attrs:{type:"primary",round:""},on:{click:e.saveRegister}},[e._v("注 册")])],1)],1),e._v(" "),e._m(0)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"footer_div"},[t("span",[this._v("\n      Copyright©2020 上海宠宝网络科技有限公司\n      "),t("a",{attrs:{href:"http://www.beian.miit.gov.cn",target:"_blank"}},[this._v("沪ICP备19024390号")])])])}]};var c=s("C7Lr")(n,l,!1,function(e){s("6MAn")},"data-v-82bc5958",null);t.default=c.exports}});